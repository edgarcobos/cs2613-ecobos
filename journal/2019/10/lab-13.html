<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8">
    <title>Lab 13</title>
    <meta name="description" content="Timers:  At the beginning of Lab 13, we went over asynchronous programming in JavaScript. We looked at the `setTimout` function which takes in a callback function and an amount of time to wait before calling the function. This imitates a sleep function wi...">
    <meta name="author"      content="The Unknown Author">
    <meta name="keywords"    content="all, Author: Edgar Cobos">
    <meta name="viewport"    content="width=device-width, initial-scale=1.0">
    <link rel="icon"      href="/favicon.ico">
    <link rel="canonical" href="http://www.example.com/2019/10/lab-13.html">
    <link rel="next" href="/2019/10/lab-12.html">

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/css/pygments.css">
    <link rel="stylesheet" type="text/css" href="/css/scribble.css">
    <link rel="stylesheet" type="text/css" href="/css/custom.css">
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml"
          href="/feeds/all.atom.xml" title="Atom Feed">
    <link rel="alternate" type="application/rss+xml"
          href="/feeds/all.rss.xml" title="RSS Feed">
    <!-- JS -->
    <script type="text/javascript">
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-xxxxx', 'auto');
      ga('send', 'pageview');
    </script>
  </head>
  <body>

    <!-- A standard Twitter Bootstrap nav bar -->
    <nav class="navbar navbar-expand-md navbar-dark bg-dark">
      <div class="container">

      <a href="/index.html" class="navbar-brand">My Blog Brand</a>

      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
              data-target="#navbar_collapse" aria-controls="navbar_collapse"
              aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbar_collapse">
          <ul class="navbar-nav mr-auto">


            <li class="nav-item dropdown">
              <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">
                Tags <b class="caret"></b>
              </a>

              <div class="dropdown-menu">
                <a class="dropdown-item" href="/tags/Author-Edgar-Cobos.html">Author: Edgar Cobos</a>
              </div>
            </li>

            <li>
              <a class="nav-link" href="/About.html">About</a>
            </li> 

            <li class="nav-item">
              <a class="nav-link" href="/feeds/all.atom.xml">Atom</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="/feeds/all.rss.xml">RSS</a>
            </li>
          </ul>
      </div>

      </div>
    </nav>


    <div class="container">
      <div class="row">

        <!-- Main column -->
        <div id="content" class="col-md-12">





          <article>
  <header>
    <h1>Lab 13</h1>
    <p class='date-and-tags'>
<time datetime="2019-10-22" pubdate="true">2019-10-22</time> :: <span class="tags"><a href="/tags/all.html">all</a></span></p>
    <p class='authors'>By: <span class="authors"><a href="/tags/Author-Edgar-Cobos.html">Edgar Cobos</a></span></p>
  </header>

<h2 id="timers">Timers</h2>

<p>At the beginning of Lab 13, we went over asynchronous programming in JavaScript. We looked at the <code>setTimout</code> function which takes in a callback function and an amount of time to wait before calling the function. This imitates a sleep function with some drawbacks. Since JavaScript runs asynchronously it will run code that is sequentially after the <code>setTimeout</code> call, which may produce an error linked to order of operations. In this case, <code>setTimeout</code> was used in a function to print out an increasing number of <code>*</code>, imitating a progress bar, which looked like this:</p>

<div class="brush: js">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="kd">function</span> <span class="nx">loop</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">i</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"\033c"</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">str</span><span class="p">);</span>
        <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="nx">loop</span><span class="p">(</span><span class="nx">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">str</span><span class="o">+</span><span class="s2">"*"</span><span class="p">);</span> <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"all done!"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nx">loop</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="s2">"*"</span><span class="p">);</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>After implementing our progress bar using the <code>setTimeout</code> function, we were introduced to <code>setInterval</code> and <code>clearInterval</code> that have the purpose to set up a recurring timer to call a function after a specified amount of time. In this case, the functions were used to again produce our own progress bar with a 300ms interaval before each additional <code>*</code>. Once the desired number of iterations was reached, the function printed &ldquo;all done!&rdquo; and cleared the interval.</p>

<div class="brush: js">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="kd">function</span> <span class="nx">animate</span><span class="p">(</span><span class="nx">iterations</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">str</span><span class="o">=</span><span class="s2">""</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">timer</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">frame</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// add code here</span>
        <span class="nx">i</span><span class="o">++</span><span class="p">;</span>
        <span class="nx">str</span> <span class="o">+=</span> <span class="s2">"*"</span><span class="p">;</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;\033c&#39;</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">str</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">i</span><span class="o">&gt;=</span><span class="nx">iterations</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// and here</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"all done"</span><span class="p">);</span>
            <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">timer</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">timer</span><span class="o">=</span><span class="nx">setInterval</span><span class="p">(</span><span class="nx">frame</span><span class="p">,</span><span class="mi">300</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">animate</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h2 id="overloading-tostring">Overloading toString</h2>

<p>Next, we practiced method overloading by taking the <strong>VillageState</strong> class from the previous lab and overloading the <code>toString</code> method to print a grid of places with the location of the robot.</p>

<div class="brush: js">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="nx">toString</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">out</span><span class="o">=</span><span class="s2">"---------\n"</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">row</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">row</span><span class="o">&lt;</span><span class="nx">villageMap</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">row</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">out</span> <span class="o">+=</span> <span class="s2">"|"</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">col</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">col</span><span class="o">&lt;</span><span class="nx">villageMap</span><span class="p">[</span><span class="nx">row</span><span class="p">].</span><span class="nx">length</span><span class="p">;</span> <span class="nx">col</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// your code goes here</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">villageMap</span><span class="p">[</span><span class="nx">row</span><span class="p">][</span><span class="nx">col</span><span class="p">]</span><span class="o">===</span><span class="kc">null</span><span class="p">)</span>
        <span class="nx">out</span> <span class="o">+=</span> <span class="s2">" "</span><span class="p">;</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">place</span> <span class="o">===</span> <span class="nx">villageMap</span><span class="p">[</span><span class="nx">row</span><span class="p">][</span><span class="nx">col</span><span class="p">])</span>
          <span class="nx">out</span> <span class="o">+=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parcels</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
        <span class="k">else</span>
          <span class="nx">out</span> <span class="o">+=</span> <span class="nx">villageMap</span><span class="p">[</span><span class="nx">row</span><span class="p">][</span><span class="nx">col</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">()[</span><span class="mi">0</span><span class="p">];</span>
      <span class="p">}</span>
      <span class="nx">out</span> <span class="o">+=</span> <span class="s2">"|"</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">out</span> <span class="o">+=</span> <span class="s2">"\n---------\n"</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">out</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h2 id="animating-the-map">Animating the map</h2>

<p>The last section of the lab integrated all of the concepts from the previous parts to animate the progress of a robot delivering parcels.</p>

<p>Why does the last part where the robot wanders around with one parcel, typically take so long? In order to reach the last part, the robot has to keep bouncing randomly between places until visiting the final place, which typically take a while.</p>
<!-- more-->
  <footer>
  </footer>
</article>
        </div>
      </div>
      <footer>
        <hr />
        <p><a href="https://twitter.com/racketlang"
              class="twitter-follow-button"
              data-show-count="false"
              data-lang="en">
             "Follow RacketLang"
           </a>
           <script type="text/javascript">
             !function(d,s,id){
                 var js,fjs=d.getElementsByTagName(s)[0];
                 if(!d.getElementById(id)){
                     js=d.createElement(s);
                     js.id=id;
                     js.src="//platform.twitter.com/widgets.js";
                     fjs.parentNode.insertBefore(js,fjs);
                 }
             }(document,"script","twitter-wjs");
           </script></p>
        <p>Site generated
        by <a href="https://github.com/greghendershott/frog">Frog</a>,
        the <strong>fr</strong>ozen bl<strong>og</strong> tool.</p>
        <p>Using <a href="http://twitter.github.com/bootstrap/index.html">Bootstrap</a>.</p>
        <p><em>Your legal notice here</em>.</p>
      </footer>
    </div>
    <!-- </body> JS -->
    <script type="text/javascript" src="/js/jquery-3.2.1.slim.min.js"></script>
    <script type="text/javascript" src="/js/bootstrap.bundle.min.js"></script>
  </body>
</html>