<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8">
    <title>My Blog</title>
    <meta name="description" content="My Blog">
    <meta name="author"      content="The Unknown Author">
    <meta name="keywords"    content="all, Author: Edgar Cobos">
    <meta name="viewport"    content="width=device-width, initial-scale=1.0">
    <link rel="icon"      href="/favicon.ico">
    <link rel="canonical" href="http://www.example.com/index.html">


    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/css/pygments.css">
    <link rel="stylesheet" type="text/css" href="/css/scribble.css">
    <link rel="stylesheet" type="text/css" href="/css/custom.css">
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml"
          href="/feeds/all.atom.xml" title="Atom Feed">
    <link rel="alternate" type="application/rss+xml"
          href="/feeds/all.rss.xml" title="RSS Feed">
    <!-- JS -->
    <script type="text/javascript">
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-xxxxx', 'auto');
      ga('send', 'pageview');
    </script>
  </head>
  <body>

    <!-- A standard Twitter Bootstrap nav bar -->
    <nav class="navbar navbar-expand-md navbar-dark bg-dark">
      <div class="container">

      <a href="/index.html" class="navbar-brand">My Blog Brand</a>

      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
              data-target="#navbar_collapse" aria-controls="navbar_collapse"
              aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbar_collapse">
          <ul class="navbar-nav mr-auto">


            <li class="nav-item dropdown">
              <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">
                Tags <b class="caret"></b>
              </a>

              <div class="dropdown-menu">
                <a class="dropdown-item" href="/tags/Author-Edgar-Cobos.html">Author: Edgar Cobos</a>
              </div>
            </li>

            <li>
              <a class="nav-link" href="/About.html">About</a>
            </li> 

            <li class="nav-item">
              <a class="nav-link" href="/feeds/all.atom.xml">Atom</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="/feeds/all.rss.xml">RSS</a>
            </li>
          </ul>
      </div>

      </div>
    </nav>


    <div class="container">
      <div class="row">

        <!-- Main column -->
        <div id="content" class="col-md-12">

          <h1>Welcome</h1>
          <p>Here is some text that only goes on the home page,
            because <code>@uri-path</code> is
            <code>/index.html</code>.</p> 



          <article>
  <header>
    <h2><a href='/2019/12/lab-23.html'>Lab 23</a></h2>
    <p class='date-and-tags'>
<time datetime="2019-12-04" pubdate="true">2019-12-04</time> :: <span class="tags"><a href="/tags/all.html">all</a></span></p>
    <p class='authors'>By: <span class="authors"><a href="/tags/Author-Edgar-Cobos.html">Edgar Cobos</a></span></p>
  </header>

<h2 id="broadcasting">Broadcasting</h2>

<p>At the beginning of this lab, we learned about broadcasting. The rule for broadcasting is that corresponding array dimensions must either be equal, or one of them must be 1. In the case where one of the dimensions is 1, the smaller matrix is tiled to match the dimensions of the larger matrix. This can be demonstrated with the following example:</p>

<div class="brush: matlab">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4
5</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="n">x</span> <span class="p">=</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">;</span>
     <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="p">;</span>
     <span class="mi">7</span> <span class="mi">8</span> <span class="mi">9</span><span class="p">];</span>
<span class="n">y</span> <span class="p">=</span> <span class="p">[</span><span class="mi">10</span> <span class="mi">20</span> <span class="mi">30</span><span class="p">];</span>
<span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
</pre></div>
</td></tr></tbody></table>
</div>

<div class="brush: matlab">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4
5</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="nb">ans</span> <span class="p">=</span>

<span class="mi">11</span>   <span class="mi">22</span>   <span class="mi">33</span>
<span class="mi">14</span>   <span class="mi">25</span>   <span class="mi">36</span>
<span class="mi">17</span>   <span class="mi">28</span>   <span class="mi">39</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h2 id="scaling-layers-of-arrays">Scaling layers of arrays</h2>

<p>In this part of the lab, we completed the <code>scale_layers</code> function like so:</p>

<div class="brush: matlab">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="k">function</span><span class="w"> </span>out <span class="p">=</span><span class="w"> </span><span class="nf">scale_layers</span><span class="p">(</span>array, weights<span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">out</span> <span class="p">=</span> <span class="n">array</span> <span class="o">.*</span> <span class="nb">reshape</span><span class="p">(</span><span class="n">weights</span><span class="p">,[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">]);</span>
<span class="n">endfunction</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>We converted <code>paris.jpg</code> to sepia by running the folowing demo code:</p>

<div class="brush: matlab">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="n">paris</span><span class="p">=</span><span class="n">imread</span><span class="p">(</span>"<span class="n">paris</span><span class="p">.</span><span class="n">jpg</span>"<span class="p">);</span>
<span class="n">sepia</span><span class="p">=</span><span class="n">scale_layers</span><span class="p">(</span><span class="n">paris</span><span class="p">,[</span><span class="mf">0.9</span><span class="p">,</span><span class="mf">0.62</span><span class="p">,</span><span class="mf">0.34</span><span class="p">]);</span>
<span class="n">imshow</span><span class="p">(</span><span class="n">sepia</span><span class="p">);</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h2 id="monochrome">Monochrome</h2>

<p>After converting to sepia, we practiced converting images to monochrome by completing the <code>monochrome</code> function as follows:</p>

<div class="brush: matlab">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="k">function</span><span class="w"> </span>out <span class="p">=</span><span class="w"> </span><span class="nf">monochrome</span><span class="p">(</span>in, weights=[0.21,0.72,0.07]<span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">out</span> <span class="p">=</span> <span class="n">sum</span><span class="p">(</span><span class="n">scale_layers</span><span class="p">(</span><span class="n">in</span><span class="p">,</span><span class="n">weights</span><span class="p">),</span><span class="mi">3</span><span class="p">)</span>
<span class="n">endfunction</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h2 id="gradient">Gradient</h2>

<p>Lastly, we completed the <code>normgrad</code> function by combining Dx and Dy arrays into a single array such that <code>norming(i,j) = norm([Dx(i,j),Dy(i,j)])</code>.</p>

<div class="brush: matlab">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="k">function</span><span class="w"> </span>normimg <span class="p">=</span><span class="w"> </span><span class="nf">normgrad</span><span class="p">(</span>img<span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">[</span><span class="n">Dx</span><span class="p">,</span> <span class="n">Dy</span><span class="p">]</span> <span class="p">=</span> <span class="n">gradient</span><span class="p">(</span><span class="n">img</span><span class="p">);</span>
    <span class="n">normimg</span> <span class="p">=</span> <span class="nb">sqrt</span><span class="p">(</span><span class="n">Dx</span><span class="o">.^</span><span class="mi">2</span> <span class="o">+</span> <span class="n">Dy</span><span class="o">.^</span><span class="mi">2</span><span class="p">);</span>
<span class="n">endfunction</span>
</pre></div>
</td></tr></tbody></table>
</div>
  <footer>
    <a href='/2019/12/lab-23.html'>&hellip; more &hellip;</a>
  </footer>
</article>
<article>
  <header>
    <h2><a href='/2019/12/lab-22.html'>Lab 22</a></h2>
    <p class='date-and-tags'>
<time datetime="2019-12-04" pubdate="true">2019-12-04</time> :: <span class="tags"><a href="/tags/all.html">all</a></span></p>
    <p class='authors'>By: <span class="authors"><a href="/tags/Author-Edgar-Cobos.html">Edgar Cobos</a></span></p>
  </header>

<h2 id="cell-arrays">Cell Arrays</h2>

<p>At the beginning of the lab, we learned about cell arrays, which are like multidimensional versions of Python&rsquo;s lists. Our task was to change the following example to find the columns sums in a function <code>rowfun</code>.</p>

<div class="brush: matlab">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="n">data</span> <span class="p">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">;</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">;</span> <span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">;</span> <span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="n">cells</span> <span class="p">=</span> <span class="n">num2cell</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">cellfun</span><span class="p">(@</span><span class="n">sum</span><span class="p">,</span><span class="n">cells</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h2 id="variable-length-argument-lists">Variable-length argument lists</h2>

<p>Next, we practiced using <code>varargin</code> to update the <code>timeit</code> function from Lab 20 for it tow work not only for single argument functions. This special input argument <code>varargin</code> collects all remaining arguments into a cell array, similar to rest in Racket.</p>

<h2 id="k-nearest-neighbour">K nearest neighbour</h2>

<p>In this part of the lab, we looked at the k-Nearest neighbour algorithm. Our task was to complete the <code>nearest</code> function which returns the row indices of the <code>k</code> closest rows of <code>data</code> to <code>v</code> with the help of the distance definition from linear algebra (<code>distance(X,Y) = norm(X-Y</code>). Then, we timed our nearest neighbour query with the following:</p>

<div class="brush: matlab">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="n">load</span> <span class="n">training</span>
<span class="n">load</span> <span class="n">testing</span>
<span class="n">timeit</span><span class="p">(</span><span class="mi">1000</span><span class="p">,@</span><span class="n">nearest</span><span class="p">,</span><span class="n">testing</span><span class="p">(</span><span class="mi">1</span><span class="p">,:),</span> <span class="mi">3</span><span class="p">,</span> <span class="n">training</span><span class="p">);</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h2 id="using-rowfun">Using rowfun</h2>

<p>Lastly, we used the <code>find</code> function to complete the loop-free version of knn, which is a useful technique to know in general.</p>
  <footer>
    <a href='/2019/12/lab-22.html'>&hellip; more &hellip;</a>
  </footer>
</article>
<article>
  <header>
    <h2><a href='/2019/11/lab-21.html'>Lab 21</a></h2>
    <p class='date-and-tags'>
<time datetime="2019-11-26" pubdate="true">2019-11-26</time> :: <span class="tags"><a href="/tags/all.html">all</a></span></p>
    <p class='authors'>By: <span class="authors"><a href="/tags/Author-Edgar-Cobos.html">Edgar Cobos</a></span></p>
  </header>

<h2 id="working-with-grids">Working with grids</h2>

<p>At the beginning of Lab 21, we reviewed some Octave syntax.</p>

<ul>
 <li>
  <p><code>[-1:0.5:1]</code> creates an array containing all numbers from &ndash;1 to 1 with intervals of 0.5.</p></li>
 <li>
  <p>Meshgrid takes in two arrays and meshes them into a single parallel array (i.e. <code>[X,Y] = meshgrid(r,r)</code>)</p></li>
 <li>
  <p><code>X.^2</code> will square all values of an array X.</p></li></ul>

<h2 id="defining-and-testing-a-function">Defining and testing a function</h2>

<p>Next, we looked at creating a function to evaluate the following: <em>δ(β, a, b) = βa·b - (β&ndash;1)b·b</em>. Wr used the <code>dot</code> function to calculate dot products as needed.</p>

<p>We were introduced to multi-line tests, which allows us to set up a test by initializing variables. We passed <code>eps</code> to our test as our error tolerance.</p>

<div class="brush: matlab">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4
5</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="c">%% delta(0,a,b) = |b|²</span>
<span class="c">%!test</span>
<span class="c">%! a = rand(2,1)</span>
<span class="c">%! b = rand(2,1)</span>
<span class="c">%! assert(delta(0,a,b), norm(b)^2, eps)</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h2 id="making-3d-plots">Making 3D plots</h2>

<p>For this part, we took the delta function and used it to build a #D surface map. The X and Y were created using the range function while Z was created using value <strong>beta</strong> of <strong>7.5</strong> and array <strong>a</strong> of <strong>[4;4]</strong>. The result was a symmetrical parabolic plot.</p>

<h2 id="using-arrayfun">Using <code>arrayfun</code></h2>

<p>In this part of the lab, we implemented the <code>arrayfun</code> function by using a mathematical function and applying it to the passed array. The following example calls <code>arrayfun</code> which iterates over both X and Y arrays and applies function <code>f</code> to them.</p>

<div class="brush: matlab">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="n">f</span> <span class="p">=</span> <span class="p">@(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)(</span><span class="n">delta</span><span class="p">(</span><span class="nb">beta</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="p">[</span><span class="n">x</span><span class="p">;</span><span class="n">y</span><span class="p">]));</span>

<span class="n">Z</span> <span class="p">=</span> <span class="n">arrayfun</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">);</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h2 id="fully-vectorizing">Fully vectorizing</h2>

<p>Out last task was to complete the faster vectorized function <code>arraydelta</code> by using the equation <code>Z(i,j) = beta * (a(1)*X(i,j) + a(2)*Y(i,j)) - (beta-1) * (X(i,j)^2 + Y(i,j)^2)</code>. For this, we replaced the calls to <code>X(i,j)</code> and <code>Y(i,j)</code> with <code>X.</code> and <code>Y.</code> for Octave to apply the operations to all values of X and Y as follows:</p>

<div class="brush: matlab">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="n">Z</span> <span class="p">=</span> <span class="nb">beta</span> <span class="o">*</span> <span class="p">(</span><span class="n">a</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.*</span><span class="n">X</span> <span class="o">+</span> <span class="n">a</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.*</span><span class="n">Y</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="nb">beta</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">X</span><span class="o">.^</span><span class="mi">2</span> <span class="o">+</span> <span class="n">Y</span><span class="o">.^</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>Timing for surfex, surfex2, and surfex3:</p>

<p>Elapsed time is 0.62296 seconds.</p>

<p>Elapsed time is 0.171985 seconds.</p>

<p>Elapsed time is 0.00023818 seconds.</p>
  <footer>
    <a href='/2019/11/lab-21.html'>&hellip; more &hellip;</a>
  </footer>
</article>
<article>
  <header>
    <h2><a href='/2019/11/lab-20.html'>Lab 20</a></h2>
    <p class='date-and-tags'>
<time datetime="2019-11-21" pubdate="true">2019-11-21</time> :: <span class="tags"><a href="/tags/all.html">all</a></span></p>
    <p class='authors'>By: <span class="authors"><a href="/tags/Author-Edgar-Cobos.html">Edgar Cobos</a></span></p>
  </header>

<h2 id="running-octave">Running Octave</h2>

<p>At the beginning of Lab 20, we practiced running Octave. Similar to Racket, there are two main ways to run it; through a REPL by running <code>octave</code> in the command line, or through a GUI application.</p>

<h2 id="fibonacci">Fibonacci</h2>

<p>Next, we looked at creating an Octave program to generate a Fibonacci sequence. Some of the noticeable differences between Octave and other programming languages is define scope, done in Octave by using keywords such as <code>endfor</code> and <code>endfunction</code>. This is how the Octave version of the Fibonacci generator ended up looking like:</p>

<div class="brush: matlab">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4
5
6
7
8
9</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="k">function</span><span class="w"> </span>ret <span class="p">=</span><span class="w"> </span><span class="nf">fib</span><span class="p">(</span>n<span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">a</span> <span class="p">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">b</span> <span class="p">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">for</span> <span class="nb">i</span><span class="p">=</span><span class="mi">0</span><span class="p">:</span><span class="n">n</span>
        <span class="n">ret</span> <span class="p">=</span> <span class="n">a</span><span class="p">;</span>
        <span class="n">a</span> <span class="p">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">;</span>
        <span class="n">b</span> <span class="p">=</span> <span class="n">ret</span><span class="p">;</span>
    <span class="n">endfor</span>
<span class="n">endfunction</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h2 id="matrix-and-vector-review">Matrix and vector review</h2>

<ul>
 <li><code>Dot product: dot([1;0;1], [2,1,0])</code></li>
 <li><code>Matrix multiplication: [1;0;1] * [2,1,0]</code></li></ul>

<h2 id="fibonacci-as-matrix-multiplication">Fibonacci as matrix multiplication</h2>

<p>After the matrix and vector review, we practiced using matrices to calculate the Fibonacci sequence.</p>

<div class="brush: matlab">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4
5</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="k">function</span><span class="w"> </span>ret <span class="p">=</span><span class="w"> </span><span class="nf">fibmat</span><span class="p">(</span>n<span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">A</span> <span class="p">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">;</span> <span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">];</span>
    <span class="n">B</span> <span class="p">=</span> <span class="n">A</span>^<span class="n">n</span><span class="p">;</span>
    <span class="n">ret</span> <span class="p">=</span> <span class="n">B</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
<span class="n">endfunction</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h2 id="performance-comparison">Performance comparison</h2>

<p>fib median=0.209ms mean=0.217ms total=21741.440ms fibmat median=0.037ms mean=0.039ms total=3910.122ms</p>

<p>Vectorization is about 5 times faster than iteration.</p>

<h2 id="using-the-profiler">Using the profiler</h2>

<p>Lastly, we looked at profiling, which improves upon timing by recording the number of calls to each function</p>

<p>Through the profiler, we were able to observe that the iterative version makes 1001 calls to the binary + operator compared to the one call made to the binary ^ in the vectorized implementation, which explains why the vectorized version is faster.</p>
  <footer>
    <a href='/2019/11/lab-20.html'>&hellip; more &hellip;</a>
  </footer>
</article>
<article>
  <header>
    <h2><a href='/2019/11/lab-19.html'>Lab 19</a></h2>
    <p class='date-and-tags'>
<time datetime="2019-11-20" pubdate="true">2019-11-20</time> :: <span class="tags"><a href="/tags/all.html">all</a></span></p>
    <p class='authors'>By: <span class="authors"><a href="/tags/Author-Edgar-Cobos.html">Edgar Cobos</a></span></p>
  </header>

<h2 id="counters-generators-and-classes">Counters, generators, and classes</h2>

<p>At the beginning of lab 19, we reviewed dunder methods in Python. We practiced implementing a <code>__next__</code> method which is called whenever an instance of the class is passed to the <code>next()</code> function. This is how our class ended up looking like:</p>

<div class="brush: py">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="k">class</span> <span class="nc">Counter</span><span class="p">:</span>
	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">x</span><span class="p">):</span>
	    <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
	    <span class="bp">self</span><span class="o">.</span><span class="n">first</span> <span class="o">=</span> <span class="n">x</span>

	<span class="k">def</span> <span class="nf">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
	    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">first</span><span class="p">:</span>
		<span class="k">print</span><span class="p">(</span><span class="s1">&#39;entering make_counter&#39;</span><span class="p">)</span>
	    <span class="k">else</span><span class="p">:</span>
		<span class="k">print</span><span class="p">(</span><span class="s1">&#39;incrementing x&#39;</span><span class="p">)</span>
	    <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>
	    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="mi">1</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h2 id="fibonacci-again">Fibonacci, again</h2>

<p>Next, we practice building an iterator class <code>Fib</code> by completing the definition of <code>__next__</code> basing our solution on the closure based version of fib from the previous lab. At this point, we where able to build a list by using an odd looking while loop, but not using some kind of list comprehension. This is due to the fact that our class is still not an iterator as we have not provided an <code>__iter__</code> method. This was fixed by adding the following to our class:</p>

<div class="brush: py">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>However, this only signals to the Python runtime that some object is an iterator. The <code>__iter__</code> method should also serve to restart the traversal of our &ldquo;virtual list&rdquo;. The <code>__iter__</code> method ended up looking like so:</p>

<div class="brush: py">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="bp">self</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h2 id="object-copying-and-equality">Object copying and equality</h2>

<p>In this part of the lab, we created a class <code>Expr</code> with methods <code>__init__</code> and <code>__eq__</code>. The <code>__init__</code> method can be compared to the constructor method in Java as its purpose is to initialize the values of instance members for new objects. For the <code>__eq__</code> method, we used vars to check if two objects have the same attributes.</p>

<div class="brush: py">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">op</span> <span class="o">=</span> <span class="n">op</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">left</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">right</span>

<span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="vm">__class__</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">vars</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">==</span> <span class="nb">vars</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h2 id="arithmetic">Arithmetic</h2>

<p>Lastly, we added an eval method to the <code>Expr</code> class using recursion to evaluate simple and compound arithmetic expressions.</p>

<div class="brush: py">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="k">def</span> <span class="nf">eval</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">recur</span><span class="p">(</span><span class="n">branch</span><span class="p">):</span>
	    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">branch</span><span class="p">,</span> <span class="n">Expr</span><span class="p">):</span>
		<span class="k">return</span> <span class="n">branch</span><span class="o">.</span><span class="n">eval</span><span class="p">()</span>
	    <span class="k">else</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">branch</span>

	<span class="n">left</span> <span class="o">=</span> <span class="n">recur</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="p">)</span>
	<span class="n">right</span> <span class="o">=</span> <span class="n">recur</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">)</span>

	<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">op</span> <span class="o">==</span> <span class="s1">&#39;+&#39;</span><span class="p">:</span>
	    <span class="k">return</span> <span class="n">left</span> <span class="o">+</span> <span class="n">right</span>
	<span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">op</span> <span class="o">==</span> <span class="s1">&#39;*&#39;</span><span class="p">:</span>
	    <span class="k">return</span> <span class="n">left</span> <span class="o">*</span> <span class="n">right</span>
</pre></div>
</td></tr></tbody></table>
</div>
  <footer>
    <a href='/2019/11/lab-19.html'>&hellip; more &hellip;</a>
  </footer>
</article>
<article>
  <header>
    <h2><a href='/2019/11/lab-18.html'>Lab 18</a></h2>
    <p class='date-and-tags'>
<time datetime="2019-11-07" pubdate="true">2019-11-07</time> :: <span class="tags"><a href="/tags/all.html">all</a></span></p>
    <p class='authors'>By: <span class="authors"><a href="/tags/Author-Edgar-Cobos.html">Edgar Cobos</a></span></p>
  </header>

<h2 id="counter">Counter</h2>

<p>At the beginning of lab 18, we learned about generators, which provide a way of delaying function evaluation, generally to preserve memory. The function <code>make_counter</code> is an example of a simple generator that acts as a counter, with the particularity that it returns one number at a time. The keyword <code>yield</code> tells the interpreter to return the count when <code>next(make_counter(x))</code> is called.</p>

<div class="brush: py">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4
5
6</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="k">def</span> <span class="nf">make_counter</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;entering make counter&#39;</span><span class="p">)</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">x</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;incrementing x&#39;</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>Next, we looked at closures to better understand generators by implementing the function <code>make_counter2</code>. The keyword <code>nonlocal</code> tells the function to look up in scope and get a reference to the variable count as opposed to creating a new variable. This is crucial as it allows us to save the value of count because the inner function is reset everytime it is called.</p>

<div class="brush: py">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4
5
6
7
8
9</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="k">def</span> <span class="nf">make_counter2</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">count</span> <span class="o">=</span> <span class="n">x</span>
    <span class="k">def</span> <span class="nf">counter</span><span class="p">():</span>
        <span class="n">nonlocal</span> <span class="n">count</span>
        <span class="k">if</span> <span class="n">count</span> <span class="o">==</span> <span class="n">x</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;entering make_counter&#39;</span><span class="p">)</span>
        <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">count</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">counter</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h2 id="fibonacci">Fibonacci</h2>

<p>After learning about generators and closures, we attempted to create a closure-generator to generate a Fibonacci sequence. This implementation was very similar to the previous function except that, instead of returning values indefinitely, we want to stop when a max value has been exceeded. This was accomplished by checking value of a and returning None when it exceeded the max.</p>

<div class="brush: py">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="k">def</span> <span class="nf">fib2</span><span class="p">(</span><span class="nb">max</span><span class="p">):</span>
    <span class="n">a</span><span class="p">,</span><span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span><span class="mi">1</span>
    <span class="k">def</span> <span class="nf">next</span><span class="p">():</span>
        <span class="n">nonlocal</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span>
        <span class="k">if</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="nb">max</span><span class="p">:</span>
                <span class="n">tmp</span> <span class="o">=</span> <span class="n">a</span>
                <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
                <span class="k">return</span> <span class="n">tmp</span>
        <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">None</span>
    <span class="k">return</span> <span class="nb">next</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h2 id="sieve">Sieve</h2>

<p>In this part of the lab, we looked at the implementation of sieve created in Lab 16. The goal this time was to take the list comprehension used in <code>drop_divisible</code> and replace it with a generator.</p>

<div class="brush: py">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="k">def</span> <span class="nf">drop_divisible</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">lst</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="n">n</span> <span class="ow">or</span> <span class="n">x</span> <span class="o">%</span> <span class="n">n</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">x</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h2 id="performance-comparison">Performance Comparison</h2>

<p>Lastly, we compared the time usage by the list comprehension and generator implementations of <code>drop_divisible</code> from the previous part. The generator runs instantly, but this is because it only returns a generator object. In order to time the generator implementation appropiately we ran the returned the generated values through a list comprehension expression by using the returned generator. This test demonstrated that the generator implementation is 36% slower than the list comprehension implementation.</p>

<pre><code>sieve=[2, 3, 5, 7]
sievegen=&lt;generator object drop_divisible at 0x103087750&gt;
0.96341959
0.002185341999999979
1.308970162</code></pre>
  <footer>
    <a href='/2019/11/lab-18.html'>&hellip; more &hellip;</a>
  </footer>
</article>
<article>
  <header>
    <h2><a href='/2019/11/lab-17.html'>Lab 17</a></h2>
    <p class='date-and-tags'>
<time datetime="2019-11-05" pubdate="true">2019-11-05</time> :: <span class="tags"><a href="/tags/all.html">all</a></span></p>
    <p class='authors'>By: <span class="authors"><a href="/tags/Author-Edgar-Cobos.html">Edgar Cobos</a></span></p>
  </header>

<h2 id="splitting-strings">Splitting strings</h2>

<p>At the beginning of lab 17, we practiced parsing CSV files using the split and splitlines builtin string methods as well as a list comprehencion. Splitlines helped us divide the table into rows while split(",") helped separate its columns.</p>

<div class="brush: py">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="p">[</span><span class="n">row</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">","</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">string</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()]</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h2 id="regular-expressions">Regular Expressions</h2>

<p>Next, we got familiar with regular expressions by following the <strong>street address Case Study</strong>. As part of the excercise, we tried a series of evaluations in a python REPL, which lead us to the expression <code>re.sub('ROAD$', 'RD.', s)</code>. This &lsquo;black magic&rsquo; that substituted only the ocurrence of &ldquo;ROAD&rdquo; at the end of the string with &ldquo;RD.&rdquo; is possible thanks to regular expressions, a domain specific language that allow us to specify complicated string operations. As we kept trying other exaluations, we learned about the <code>\b</code> regex feature as well as the more fancier feature <code>[]</code> to denote a character class.</p>

<h2 id="stripping-quotes">Stripping Quotes</h2>

<p>Following, we modified our <code>split_csv</code> function from part 1 to make it work for entries of CSV files that have quotes that are not part of the content. For this, we added the function <code>strip_quotes</code> that used the following regular expression:</p>

<div class="brush: py">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4
5
6
7</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="k">def</span> <span class="nf">strip_quotes</span><span class="p">(</span><span class="n">string</span><span class="p">):</span>
    <span class="n">strip_regex</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^"?([^"]+)"?$&#39;</span><span class="p">)</span>
    <span class="n">search</span> <span class="o">=</span> <span class="n">strip_regex</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">search</span><span class="p">:</span>
        <span class="n">search</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">None</span>
</pre></div>
</td></tr></tbody></table>
</div>

<ul>
 <li>
  <p><code>^... - matches the start of the string</code></p></li>
 <li>
  <p><code>...$ - matches the end of the string or just before the newline at the end of the string</code></p></li>
 <li>
  <p><code>...? - causes the resulting RE to match 0 or 1 repetitions of the preceding RE</code></p></li>
 <li>
  <p><code>(...) - matches whatever regular expression is inside the parentheses, and indicates the start and end of a group</code></p></li>
 <li>
  <p><code>[^...] - used to indicate compliment of set of characters</code></p></li>
 <li>
  <p><code>...+ - causes the resulting RE to match 1 or more repetitions of the preceding RE</code></p></li></ul>

<p> ## Handling quoted commas</p>

<p> In this part of the lab, we completed the definition of <code>split_row_3</code> using a regular expression that matches either a quoted or an unquoted column for each of three columns. Now <code>split_csv</code> was able to handle quoted commas in rows with exactly 3 columns by using the new function.</p>

<div class="brush: py">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="n">split_regex</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
    <span class="sa">r</span><span class="sd">&#39;&#39;&#39;^   # start</span>
<span class="sd">    ("[^"]*"|[^,]+)  # first column</span>
<span class="sd">    ,</span>
<span class="sd">    ("[^"]*"|[^,]+)  # second column</span>
<span class="sd">    ,</span>
<span class="sd">    ("[^"]*"|[^,]+)  # third column</span>
<span class="sd">    $&#39;&#39;&#39;</span><span class="p">,</span>
    <span class="n">re</span><span class="o">.</span><span class="n">VERBOSE</span>
<span class="p">)</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>*with verbose regular expressions, whitespace as well as comments are ignored</p>

<h2 id="parsing-more-columns">Parsing more columns</h2>

<p>Lastly, we used our column matching regex, along with the <code>findall</code> methdod to match any number of columns in a new function <code>split_row</code> and used it in <code>split_csv</code> to test it.</p>

<div class="brush: py">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4
5
6
7</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="k">def</span> <span class="nf">split_row</span><span class="p">(</span><span class="n">string</span><span class="p">):</span>
    <span class="n">split_regex</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;("[^"]*"|[^,]+)&#39;</span><span class="p">)</span>
    <span class="n">search</span> <span class="o">=</span> <span class="n">split_regex</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">search</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[</span> <span class="n">strip_quotes</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">search</span> <span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">None</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>*findall returns all non-overlapping matches of a pattern in a string as a list of strings</p>
  <footer>
    <a href='/2019/11/lab-17.html'>&hellip; more &hellip;</a>
  </footer>
</article>
<article>
  <header>
    <h2><a href='/2019/10/lab-16.html'>Lab 16</a></h2>
    <p class='date-and-tags'>
<time datetime="2019-10-31" pubdate="true">2019-10-31</time> :: <span class="tags"><a href="/tags/all.html">all</a></span></p>
    <p class='authors'>By: <span class="authors"><a href="/tags/Author-Edgar-Cobos.html">Edgar Cobos</a></span></p>
  </header>

<h2 id="globbing-and-list-comprehensions">Globbing and List comprehensions</h2>

<p>At the beginning of lab 16, we learned about list comprehensions, which provide a compact way of mapping a list into another list by applying a function to each of the elements of the list. As an excercise we constructed an equivalent list comprehension to a given for loop and tested it through <code>pytest</code>. One way to look at list comprehensions is as a convenient syntax for <code>map</code>, which is a familiar concept from both Racket and JavaScript. Although Python also has <code>map</code> and <code>lambda</code>, they are considered less idiomatic than using list comprehensions.</p>

<div class="brush: py">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="n">python_files_comp</span> <span class="o">=</span> <span class="p">[</span><span class="n">join</span><span class="p">(</span><span class="n">new_dir</span><span class="p">,</span><span class="nb">file</span><span class="p">)</span> <span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">"*.py"</span><span class="p">)]</span>

<span class="n">python_files_map</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="nb">file</span><span class="p">:</span> <span class="n">join</span><span class="p">(</span><span class="n">new_dir</span><span class="p">,</span><span class="nb">file</span><span class="p">),</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">"*.py"</span><span class="p">))</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h2 id="dictionary-comprehensions">Dictionary Comprehensions</h2>

<p>Next, we learned about dictionary comprehensions, which are similar to list comprehensions, except that they use key-value format. As an exercise, we created a function <code>list2dict</code> to transform a list into a dictionary indexed by integers using a dictionary comprehension. Personally, I found this function easier to implement in python than the list-&gt;hash function in racket. The function was tested through <code>pytest</code> and used the python builtin range like so:</p>

<div class="brush: py">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="k">def</span> <span class="nf">list2dict</span><span class="p">(</span><span class="n">lst</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span> <span class="n">lst</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lst</span><span class="p">))}</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h2 id="filtered-list-comprehensions">Filtered List Comprehensions</h2>

<p>Then, we practiced filtering a list of values using list comprehension and an if clause. In this case, our task was to re-implement the function <code>drop-divisible</code> we had wrote in racket. We also looked at the implementation of <code>sieve-with</code>, which updated the list on every iteration, something that could be done without mutation in Racket by tail recursion or for/foldl.</p>

<div class="brush: py">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="k">def</span> <span class="nf">drop_divisible</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">lst</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">elem</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">lst</span> <span class="k">if</span> <span class="n">elem</span> <span class="o">==</span> <span class="n">n</span> <span class="ow">or</span> <span class="n">elem</span> <span class="o">%</span> <span class="n">n</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">]</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h2 id="using-format">Using <code>format</code></h2>

<p>In the last part of the lab, we looked at the different ways of constructing output. The simple way is by using the overloaded operator <code>+</code> while a more powerful way to combine values into a formatted output string is through the <code>format</code> method. We practiced writing a string equivalent to one produced using <code>+</code> by using <code>format</code> like so:</p>

<div class="brush: py">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="n">strings_format</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"{}</span><span class="se">\t</span><span class="s2">{:d}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span><span class="o">.</span><span class="n">st_size</span><span class="p">)</span> <span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">"*.py"</span><span class="p">)]</span>
</pre></div>
</td></tr></tbody></table>
</div>
  <footer>
    <a href='/2019/10/lab-16.html'>&hellip; more &hellip;</a>
  </footer>
</article>
<article>
  <header>
    <h2><a href='/2019/10/lab-15.html'>Lab 15</a></h2>
    <p class='date-and-tags'>
<time datetime="2019-10-29" pubdate="true">2019-10-29</time> :: <span class="tags"><a href="/tags/all.html">all</a></span></p>
    <p class='authors'>By: <span class="authors"><a href="/tags/Author-Edgar-Cobos.html">Edgar Cobos</a></span></p>
  </header>

<h2 id="problem-description">Problem Description</h2>

<p>The lab started with a demo of postfix or reverse polish notation, where, opposite to infix notation, numbers are given first and then the desired operation. The demo was followed by a discussion of the requirements to write a program for a postfix calculator. As for the input requirements, the program should read and process lines of input one at a time, until it reads &lsquo;quit&rsquo; on a line by itself. Each line of input will either be an integer, or a string <code>+, -, \*, /, ^, print, pop, swap, dup</code> representing an operation. The output will depend on the print operations from input, which results in printing the top element of the stack.</p>

<h2 id="numbers">Numbers</h2>

<p>In this part of the lab, we created a file <code>rpn.py</code> containing given code to push integers into our stack. We then created another file <code>test_rpn.py</code> that imported the <code>process</code> definition from rpn and tested the <code>push</code> functionality. We also used this time to practice with producing test coverage reports by running pytest&ndash;3 with <code>--cov=rpn</code>.</p>

<h2 id="arithmetic">Arithmetic</h2>

<p>Using an <code>if / elif / else</code> construction, we updated our implementation of <code>process</code> to pass tests for the required arithmetic operations (plus, minus, mult, div, and pow). In my case, I created a helper function <code>_arith</code> to handle the different operations whenever process is called with one of the arithmetic operations.</p>

<div class="brush: py">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="k">def</span> <span class="nf">_arith</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">op</span> <span class="o">==</span> <span class="s2">"+"</span><span class="p">):</span>
        <span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span><span class="n">op</span> <span class="o">==</span> <span class="s2">"-"</span><span class="p">):</span>
        <span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="o">-</span><span class="n">b</span><span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span><span class="n">op</span> <span class="o">==</span> <span class="s2">"*"</span><span class="p">):</span>
        <span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="o">*</span><span class="n">b</span><span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span><span class="n">op</span> <span class="o">==</span> <span class="s2">"/"</span><span class="p">):</span>
        <span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="o">//</span><span class="n">b</span><span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span><span class="n">op</span> <span class="o">==</span> <span class="s2">"^"</span><span class="p">):</span>
        <span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="o">**</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h2 id="improving-robustness-of-the-tests">Improving robustness of the tests</h2>

<p>In order to be able to make our tests indpenent, we added &ldquo;clear&rdquo; to our operations to reset the stack to empty with <code>stack.clear()</code>. We chose to clear the stack at the beginning of our tests as to not rely on other tests clearing it.</p>

<h2 id="stack-manipulation">Stack manipulation</h2>

<p>We extended our <code>process</code> implementation to pass tests for the remaining operations (dup, pop, swap, and print). We benefitted from Python&rsquo;s support of negative indexing for our implementation of <strong>dup</strong>. For my implementation of <strong>swap</strong>, I reused the <code>_arith</code> function to pop two values back in reverse order. Lastly, for our implementation of <strong>print</strong>, we chose to return the top element of the stack rather than working directly with stdout to aid in testing.</p>

<h2 id="processing-lists-of-operations">Processing Lists of Operations</h2>

<p>In the last section of the lab, we completed the definition of <code>process_list</code> that takes a list of operations and returns a list of numbers depending on the prints from input. By this point, we fulfilled the input and output requirements for the postfix calculator.</p>

<div class="brush: py">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="k">def</span> <span class="nf">process_list</span><span class="p">(</span><span class="n">lines</span><span class="p">):</span>
    <span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">line</span> <span class="o">==</span> <span class="s2">"quit"</span><span class="p">):</span>
            <span class="k">break</span>
        <span class="n">retv</span> <span class="o">=</span> <span class="n">process</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">retv</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">retv</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">out</span>
</pre></div>
</td></tr></tbody></table>
</div>
  <footer>
    <a href='/2019/10/lab-15.html'>&hellip; more &hellip;</a>
  </footer>
</article>
<article>
  <header>
    <h2><a href='/2019/10/lab-14.html'>Lab 14</a></h2>
    <p class='date-and-tags'>
<time datetime="2019-10-24" pubdate="true">2019-10-24</time> :: <span class="tags"><a href="/tags/all.html">all</a></span></p>
    <p class='authors'>By: <span class="authors"><a href="/tags/Author-Edgar-Cobos.html">Edgar Cobos</a></span></p>
  </header>

<h2 id="first-example">First Example</h2>

<p>In lab 14, we started looking at the Python programming language. The first excercise required us to download the file <code>humansize.py</code> and run it from terminal and in vscodium with the debugger. We also evaluated some expressions using the bottom prompt of the debugguer window in vscodium as well as by running <code>python3</code> in the terminal, which is the equivalent of evaluating expressions in the interactions area in DrRacket.</p>

<h2 id="pytest">Pytest</h2>

<p>Next, we practiced writing unit tests using pytest. As an excercise, we downloaded the file <code>test_humansize.py</code> and ran it with <code>pytest-3</code> in the terminal. We also converted working examples from <strong>DiP3 1.2.1</strong> and learned to run the tests from within vscodium.</p>

<h2 id="modules">Modules</h2>

<p>Then, we went over modules in Python, for which we defined a new function that calls the function <code>approximate_size</code> from the humansize module, but has a default of False for the parameter <code>a_kilobyte_is_1024_bytes</code>. We also learned that code guarded by <code>if __name__ == '__main__'</code> does not run when importing the module.</p>

<p>The new function looked like this:</p>

<div class="brush: py">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="kn">import</span> <span class="nn">humansize</span>

<span class="k">def</span> <span class="nf">approximate_size</span><span class="p">(</span><span class="nb">bytes</span><span class="p">,</span> <span class="n">k_is_1024</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">humansize</span><span class="o">.</span><span class="n">approximate_size</span><span class="p">(</span><span class="nb">bytes</span><span class="p">,</span> <span class="n">a_kilobyte_is_1024_bytes</span> <span class="o">=</span> <span class="n">k_is_1024</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h2 id="more-testing-docstrings">More testing, docstrings</h2>

<p>In this part of the lab, we created <code>test_client.py</code> and added tests to make sure that the new function made sense and had a docstring by accessing it like so: <code>approximate_size.__doc__</code>.</p>

<h2 id="indentation">Indentation</h2>

<p>Afterwards, we learned about Python&rsquo;s surprising use of indentation to define blocks by fixing the indentation in <code>fizzbuzz.py</code> and adding the missing case for Fizz to the FizzBuzz solution.</p>

<p>The corrected version of <code>fizzbuzz.py</code> looked like this:</p>

<div class="brush: py">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4
5
6
7
8
9</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">101</span><span class="p">):</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">i</span><span class="o">%</span><span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">i</span><span class="o">%</span><span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">"FizzBuzz"</span><span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span><span class="n">i</span><span class="o">%</span><span class="mi">3</span><span class="o">==</span><span class="mi">0</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">"Fizz"</span><span class="p">)</span>
    <span class="k">elif</span> <span class="p">(</span><span class="n">i</span><span class="o">%</span><span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">"Buzz"</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table>
</div>

<h2 id="exceptions">Exceptions</h2>

<p>In the last section, we modified <code>divisive.py</code> so that it would pass the provided tests and my solution ended up looking like this:</p>

<div class="brush: py">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4
5</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span><span class="k">def</span> <span class="nf">fraction</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
    <span class="k">if</span><span class="p">(</span><span class="n">b</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">a</span><span class="o">/</span><span class="n">b</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">"NaN"</span>
</pre></div>
</td></tr></tbody></table>
</div>
  <footer>
    <a href='/2019/10/lab-14.html'>&hellip; more &hellip;</a>
  </footer>
</article>
<footer>
 <ul class="pagination">
  <li class="page-item disabled"><a class="page-link" href="#">
    <quote>&larr;</quote></a></li>
  <li class="page-item active"><a class="page-link" href="/index.html">1</a></li>
  <li class="page-item"><a class="page-link" href="/index-2.html">2</a></li>
  <li class="page-item"><a class="page-link" href="/index-3.html">3</a></li>
  <li class="page-item"><a class="page-link" href="/index-2.html">
    <quote>&rarr;</quote></a></li></ul></footer>
        </div>
      </div>
      <footer>
        <hr />
        <p><a href="https://twitter.com/racketlang"
              class="twitter-follow-button"
              data-show-count="false"
              data-lang="en">
             "Follow RacketLang"
           </a>
           <script type="text/javascript">
             !function(d,s,id){
                 var js,fjs=d.getElementsByTagName(s)[0];
                 if(!d.getElementById(id)){
                     js=d.createElement(s);
                     js.id=id;
                     js.src="//platform.twitter.com/widgets.js";
                     fjs.parentNode.insertBefore(js,fjs);
                 }
             }(document,"script","twitter-wjs");
           </script></p>
        <p>Site generated
        by <a href="https://github.com/greghendershott/frog">Frog</a>,
        the <strong>fr</strong>ozen bl<strong>og</strong> tool.</p>
        <p>Using <a href="http://twitter.github.com/bootstrap/index.html">Bootstrap</a>.</p>
        <p><em>Your legal notice here</em>.</p>
      </footer>
    </div>
    <!-- </body> JS -->
    <script type="text/javascript" src="/js/jquery-3.2.1.slim.min.js"></script>
    <script type="text/javascript" src="/js/bootstrap.bundle.min.js"></script>
  </body>
</html>